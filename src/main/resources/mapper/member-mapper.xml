<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="member">
	<resultMap type="MemberVO" id="MemberMap">
		<result column="user_no" property="userNo"/>
		<result column="user_id" property="userId"/>
		<result column="user_name" property="userName"/>
		<result column="user_pwd" property="userPwd"/>
		<result column="email" property="email"/>
		<result column="phone" property="phone"/>
		<result column="grade" property="grade"/>
		<result column="address" property="address"/>
	</resultMap>
	
<!-- 	<resultMap type="MemberVO" id="MemberCount">
		<result column="count" property="count"/>
	</resultMap> -->

	<select id="countMember" resultType="MemberVO">
		select count(*) as count from user_tb 
	</select>

	
	<select id="searchMember2" parameterType="MemberVO" resultType="MemberVO">
		select user_id as userId, user_name as userName from user_tb where id=#{userId}
	</select>
	
	<select id="searchMember" parameterType="MemberVO" resultMap="MemberMap">
		select user_id, user_name from user_tb where user_id=#{userId}
	</select>
	
	<select id="loginMember" parameterType="MemberVO" resultMap="MemberMap">
		SELECT * FROM USER_TB WHERE USER_ID =#{userId} AND USER_PWD = #{userPwd} 
	</select>

	<insert id="insertMember" parameterType="MemberVO" statementType="PREPARED" >
		insert into user_tb values (user_seq.nextVal, #{userId}, #{userName}, #{userPwd}, #{email}, #{phone}, 0, #{address})
	</insert>
	
	<select id="isValidId"  parameterType="string" resultType="Integer">
		SELECT COUNT(*) FROM user_tb WHERE USER_ID = #{userId}
	</select>
	
	<update id="memberUpdate" parameterType="MemberVO" >
		UPDATE USER_TB SET user_pwd = #{userPwd}, phone = #{phone}, address = #{address} WHERE USER_ID = #{userId}
	</update>
	
	<delete id="memberDelete" parameterType="MemberVO">
		delete from user_tb where user_id = #{userId} and user_pwd = #{userPwd}
	</delete>

</mapper>